- id: first
  path: /comm/v2/flight-offer/flight-search
  method: POST
  extract:
    headers:
      - name: X-Session-Id
        as: sessionId
    body:
      - path: flights[*].fares[*].uri
        as: flightFareUri
        type: string

- id: second
  path: /comm/v1/flight-offer/air-bundle-search
  method: POST
  extract:
    headers:
      - name: X-Session-Id
        as: sessionId
    body:
      - path: airBundleOffers[*].fareUri
        as: flightFareUri
        type: string
      - path: airBundleOffers[*].uri
        as: bundleOfferUri
        type: string
  inject:
    headers:
      - name: X-Session-Id
        from: first.sessionId
    body:
      - path: flightFareUris
        from: first.flightFareUri
        type: array 

- id: third 
  path: /comm/v1/flight-offer/create-offer
  method: POST
  inject:
    headers:
      - name: X-Session-Id
        from: second.sessionId
    body:
      - path: flightFareUris
        from: second.flightFareUri
        type: array 
      - path: bundleOfferUris
        from: second.bundleOfferUri
        type: array
  
